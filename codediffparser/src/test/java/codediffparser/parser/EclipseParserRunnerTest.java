package codediffparser.parser;

import static org.junit.jupiter.api.Assertions.assertEquals;

import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestInstance;
import org.junit.jupiter.api.TestInstance.Lifecycle;

import codediffparser.callgraph.Mode;
import codediffparser.parser.ParserRunnerFactory.PARSER_TYPE;

@TestInstance(Lifecycle.PER_CLASS)
public class EclipseParserRunnerTest {
    private IParserRunner parser;
    private static final String result = "{"
            + "\"links\":[{\"source\":\"java.util.List#add\",\"target\":\"java.util.List\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.util.List#add:java.util.List\"},{\"source\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"target\":\"MyOtherClass\",\"relation\":\"SUPERCLASS\",\"lineNumbers\":[22],\"status\":\"ADDED\",\"id\":\"SUPERCLASS:codediffparser.testclasses.MyClass.MyInnerClass:MyOtherClass\"},{\"source\":\"codediffparser.testclasses.MyClass.Ibaz\",\"target\":\"codediffparser.testclasses.MyClass.Ibaz#trick\",\"relation\":\"METHOD\",\"lineNumbers\":[12],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass.Ibaz:codediffparser.testclasses.MyClass.Ibaz#trick\"},{\"source\":\"codediffparser.testclasses.MyClass#foo\",\"target\":\"java.util.List#add\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[18,19],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.MyClass#foo:java.util.List#add\"},{\"source\":\"java.lang.Object#getClass\",\"target\":\"java.lang.Object\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.lang.Object#getClass:java.lang.Object\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.lang.String#startsWith\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[20],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.lang.String#startsWith\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.util.Arrays#asList\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[17],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.util.Arrays#asList\"},{\"source\":\"codediffparser.testclasses.MyClass#foo\",\"target\":\"codediffparser.testclasses.MyClass#bar\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[18,19],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.MyClass#foo:codediffparser.testclasses.MyClass#bar\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe\",\"relation\":\"METHOD\",\"lineNumbers\":[10],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.inner.MyOtherClass.IDoStuff:codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.util.stream.Stream#filter\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[18],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.util.stream.Stream#filter\"},{\"source\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"target\":\"codediffparser.testclasses.MyClass.Ibaz\",\"relation\":\"INTERFACE\",\"lineNumbers\":[22],\"status\":\"ADDED\",\"id\":\"INTERFACE:codediffparser.testclasses.MyClass.MyInnerClass:codediffparser.testclasses.MyClass.Ibaz\"},{\"source\":\"java.util.Arrays#asList\",\"target\":\"java.util.Arrays\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.util.Arrays#asList:java.util.Arrays\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.lang.String#split\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[17],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.lang.String#split\"},{\"source\":\"codediffparser.testclasses.MyClass.MyInnerClass#magic\",\"target\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"ADDED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass.MyInnerClass#magic:codediffparser.testclasses.MyClass.MyInnerClass\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"java.lang.Class\",\"relation\":\"TYPE\",\"lineNumbers\":[15],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.MyClass:java.lang.Class\"},{\"source\":\"java.util.stream.Stream#map\",\"target\":\"java.util.stream.Stream\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.util.stream.Stream#map:java.util.stream.Stream\"},{\"source\":\"codediffparser.testclasses.MyClass#bar\",\"target\":\"java.lang.Object#getClass\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[32,22],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.MyClass#bar:java.lang.Object#getClass\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass#applyDoSomething\",\"relation\":\"METHOD\",\"lineNumbers\":[26],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.inner.MyOtherClass:codediffparser.testclasses.inner.MyOtherClass#applyDoSomething\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.util.stream.Stream#map\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[18],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.util.stream.Stream#map\"},{\"source\":\"java.util.stream.Stream#forEach\",\"target\":\"java.util.stream.Stream\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.util.stream.Stream#forEach:java.util.stream.Stream\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"java.lang.String\",\"relation\":\"TYPE\",\"lineNumbers\":[17,18,21,31],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.MyClass:java.lang.String\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"relation\":\"METHOD\",\"lineNumbers\":[16],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.inner.MyOtherClass:codediffparser.testclasses.inner.MyOtherClass#doSomething\"},{\"source\":\"codediffparser.testclasses.MyClass#foo\",\"target\":\"codediffparser.testclasses.MyClass\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass#foo:codediffparser.testclasses.MyClass\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.util.Collection#stream\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[18],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.util.Collection#stream\"},{\"source\":\"java.util.stream.Stream#filter\",\"target\":\"java.util.stream.Stream\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.util.stream.Stream#filter:java.util.stream.Stream\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass#foo\",\"relation\":\"METHOD\",\"lineNumbers\":[13],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.inner.MyOtherClass:codediffparser.testclasses.inner.MyOtherClass#foo\"},{\"source\":\"java.lang.String#startsWith\",\"target\":\"java.lang.String\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.lang.String#startsWith:java.lang.String\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"codediffparser.testclasses.MyClass#foo\",\"relation\":\"METHOD\",\"lineNumbers\":[15],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass:codediffparser.testclasses.MyClass#foo\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass\",\"target\":\"java.lang.String\",\"relation\":\"TYPE\",\"lineNumbers\":[17],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.inner.MyOtherClass:java.lang.String\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"codediffparser.testclasses.MyClass.Ibaz\",\"relation\":\"TYPE\",\"lineNumbers\":[22,9,15],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.MyClass:codediffparser.testclasses.MyClass.Ibaz\"},{\"source\":\"java.lang.String#split\",\"target\":\"java.lang.String\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.lang.String#split:java.lang.String\"},{\"source\":\"codediffparser.testclasses.MyClass#bar\",\"target\":\"codediffparser.testclasses.MyClass#foo\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[32,22],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.MyClass#bar:codediffparser.testclasses.MyClass#foo\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff\",\"relation\":\"TYPE\",\"lineNumbers\":[16],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.inner.MyOtherClass:codediffparser.testclasses.inner.MyOtherClass.IDoStuff\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"java.util.ArrayList\",\"relation\":\"TYPE\",\"lineNumbers\":[17,18],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.MyClass:java.util.ArrayList\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass\",\"target\":\"java.util.List\",\"relation\":\"TYPE\",\"lineNumbers\":[17],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.inner.MyOtherClass:java.util.List\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[23],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.inner.MyOtherClass#doSomething:codediffparser.testclasses.inner.MyOtherClass\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"java.util.List\",\"relation\":\"TYPE\",\"lineNumbers\":[17,18],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.MyClass:java.util.List\"},{\"source\":\"codediffparser.testclasses.MyClass#bar\",\"target\":\"codediffparser.testclasses.MyClass\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass#bar:codediffparser.testclasses.MyClass\"},{\"source\":\"codediffparser.testclasses.MyClass#foo\",\"target\":\"codediffparser.testclasses.MyClass.MyInnerClass#magic\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[17],\"status\":\"ADDED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.MyClass#foo:codediffparser.testclasses.MyClass.MyInnerClass#magic\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff\",\"target\":\"java.lang.String\",\"relation\":\"TYPE\",\"lineNumbers\":[10],\"status\":\"UNCHANGED\",\"id\":\"TYPE:codediffparser.testclasses.inner.MyOtherClass.IDoStuff:java.lang.String\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"relation\":\"TYPE\",\"lineNumbers\":[9],\"status\":\"ADDED\",\"id\":\"TYPE:codediffparser.testclasses.MyClass:codediffparser.testclasses.MyClass.MyInnerClass\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"target\":\"java.util.stream.Stream#forEach\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[18],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#doSomething:java.util.stream.Stream#forEach\"},{\"source\":\"java.util.Collection#stream\",\"target\":\"java.util.Collection\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:java.util.Collection#stream:java.util.Collection\"},{\"source\":\"codediffparser.testclasses.MyClass\",\"target\":\"codediffparser.testclasses.MyClass#bar\",\"relation\":\"METHOD\",\"lineNumbers\":[21,31],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass:codediffparser.testclasses.MyClass#bar\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff\",\"relation\":\"METHOD\",\"lineNumbers\":[],\"status\":\"UNCHANGED\",\"id\":\"METHOD:codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe:codediffparser.testclasses.inner.MyOtherClass.IDoStuff\"},{\"source\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"target\":\"codediffparser.testclasses.MyClass.MyInnerClass#magic\",\"relation\":\"METHOD\",\"lineNumbers\":[23],\"status\":\"ADDED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass.MyInnerClass:codediffparser.testclasses.MyClass.MyInnerClass#magic\"},{\"source\":\"codediffparser.testclasses.inner.MyOtherClass#applyDoSomething\",\"target\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"relation\":\"METHOD_CALL\",\"lineNumbers\":[27],\"status\":\"UNCHANGED\",\"id\":\"METHOD_CALL:codediffparser.testclasses.inner.MyOtherClass#applyDoSomething:codediffparser.testclasses.inner.MyOtherClass#doSomething\"},{\"source\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"target\":\"codediffparser.testclasses.MyClass.MyInnerClass#trick\",\"relation\":\"METHOD\",\"lineNumbers\":[26],\"status\":\"ADDED\",\"id\":\"METHOD:codediffparser.testclasses.MyClass.MyInnerClass:codediffparser.testclasses.MyClass.MyInnerClass#trick\"}],"
            + "\"nodes\":[{\"filePath\":\"inner\\\\MyOtherClass.java\",\"name\":\"MyOtherClass\",\"declariningClassesName\":null,\"packageName\":\"codediffparser.testclasses.inner\",\"type\":\"CLASS\",\"modifiers\":[\"public\",\"abstract\"],\"lineNumber\":6,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"codediffparser.testclasses.inner.MyOtherClass\",\"declaringClassesName\":null},{\"filePath\":\"inner\\\\MyOtherClass.java\",\"name\":\"applyMe\",\"declariningClassesName\":\"MyOtherClass.IDoStuff\",\"packageName\":\"codediffparser.testclasses.inner\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":10,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff\",\"id\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff#applyMe\",\"declaringClassesName\":\"MyOtherClass.IDoStuff\"},{\"filePath\":null,\"name\":\"Arrays\",\"declariningClassesName\":null,\"packageName\":\"java.util\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"java.util.Arrays\",\"declaringClassesName\":null},{\"filePath\":\"MyClass.java\",\"name\":\"foo\",\"declariningClassesName\":\"MyClass\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":15,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.MyClass\",\"id\":\"codediffparser.testclasses.MyClass#foo\",\"declaringClassesName\":\"MyClass\"},{\"filePath\":null,\"name\":\"magic\",\"declariningClassesName\":\"MyClass.MyInnerClass\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":17,\"status\":\"ADDED\",\"parentNodeId\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"id\":\"codediffparser.testclasses.MyClass.MyInnerClass#magic\",\"declaringClassesName\":\"MyClass.MyInnerClass\"},{\"filePath\":null,\"name\":\"getClass\",\"declariningClassesName\":\"Object\",\"packageName\":\"java.lang\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":22,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.lang.Object\",\"id\":\"java.lang.Object#getClass\",\"declaringClassesName\":\"Object\"},{\"filePath\":\"inner\\\\MyOtherClass.java\",\"name\":\"doSomething\",\"declariningClassesName\":\"MyOtherClass\",\"packageName\":\"codediffparser.testclasses.inner\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":16,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner.MyOtherClass\",\"id\":\"codediffparser.testclasses.inner.MyOtherClass#doSomething\",\"declaringClassesName\":\"MyOtherClass\"},{\"filePath\":null,\"name\":\"stream\",\"declariningClassesName\":\"Collection\",\"packageName\":\"java.util\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":18,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.util.Collection\",\"id\":\"java.util.Collection#stream\",\"declaringClassesName\":\"Collection\"},{\"filePath\":null,\"name\":\"ArrayList\",\"declariningClassesName\":null,\"packageName\":\"java.util\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses\",\"id\":\"java.util.ArrayList\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"map\",\"declariningClassesName\":\"Stream\",\"packageName\":\"java.util.stream\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":18,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.util.stream.Stream\",\"id\":\"java.util.stream.Stream#map\",\"declaringClassesName\":\"Stream\"},{\"filePath\":null,\"name\":\"add\",\"declariningClassesName\":\"List\",\"packageName\":\"java.util\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":18,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.util.List\",\"id\":\"java.util.List#add\",\"declaringClassesName\":\"List\"},{\"filePath\":null,\"name\":\"startsWith\",\"declariningClassesName\":\"String\",\"packageName\":\"java.lang\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":20,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.lang.String\",\"id\":\"java.lang.String#startsWith\",\"declaringClassesName\":\"String\"},{\"filePath\":\"inner\\\\MyOtherClass.java\",\"name\":\"IDoStuff\",\"declariningClassesName\":\"MyOtherClass\",\"packageName\":\"codediffparser.testclasses.inner\",\"type\":\"INTERFACE\",\"modifiers\":[\"@FunctionalInterface\",\"public\"],\"lineNumber\":8,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner.MyOtherClass\",\"id\":\"codediffparser.testclasses.inner.MyOtherClass.IDoStuff\",\"declaringClassesName\":\"MyOtherClass\"},{\"filePath\":null,\"name\":\"Ibaz\",\"declariningClassesName\":\"MyClass\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"codediffparser.testclasses.MyClass.Ibaz\",\"declaringClassesName\":\"MyClass\"},{\"filePath\":null,\"name\":\"asList\",\"declariningClassesName\":\"Arrays\",\"packageName\":\"java.util\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":17,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.util.Arrays\",\"id\":\"java.util.Arrays#asList\",\"declaringClassesName\":\"Arrays\"},{\"filePath\":null,\"name\":\"String\",\"declariningClassesName\":null,\"packageName\":\"java.lang\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner\",\"id\":\"java.lang.String\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"filter\",\"declariningClassesName\":\"Stream\",\"packageName\":\"java.util.stream\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":18,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.util.stream.Stream\",\"id\":\"java.util.stream.Stream#filter\",\"declaringClassesName\":\"Stream\"},{\"filePath\":null,\"name\":\"Stream<String>\",\"declariningClassesName\":null,\"packageName\":\"java.util.stream\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"java.util.stream.Stream<String>\",\"declaringClassesName\":null},{\"filePath\":\"MyClass.java\",\"name\":\"MyOtherClass\",\"declariningClassesName\":null,\"packageName\":\"codediffparser.testclasses\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"ADDED\",\"parentNodeId\":null,\"id\":\"codediffparser.testclasses.MyOtherClass\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"List<String>\",\"declariningClassesName\":null,\"packageName\":\"java.util\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"java.util.List<String>\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"Collection<String>\",\"declariningClassesName\":null,\"packageName\":\"java.util\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"java.util.Collection<String>\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"split\",\"declariningClassesName\":\"String\",\"packageName\":\"java.lang\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":17,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.lang.String\",\"id\":\"java.lang.String#split\",\"declaringClassesName\":\"String\"},{\"filePath\":null,\"name\":\"forEach\",\"declariningClassesName\":\"Stream\",\"packageName\":\"java.util.stream\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":18,\"status\":\"UNCHANGED\",\"parentNodeId\":\"java.util.stream.Stream\",\"id\":\"java.util.stream.Stream#forEach\",\"declaringClassesName\":\"Stream\"},{\"filePath\":\"inner\\\\MyOtherClass.java\",\"name\":\"foo\",\"declariningClassesName\":\"MyOtherClass\",\"packageName\":\"codediffparser.testclasses.inner\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":13,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner.MyOtherClass\",\"id\":\"codediffparser.testclasses.inner.MyOtherClass#foo\",\"declaringClassesName\":\"MyOtherClass\"},{\"filePath\":null,\"name\":\"List\",\"declariningClassesName\":null,\"packageName\":\"java.util\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner\",\"id\":\"java.util.List\",\"declaringClassesName\":null},{\"filePath\":\"inner\\\\MyOtherClass.java\",\"name\":\"applyDoSomething\",\"declariningClassesName\":\"MyOtherClass\",\"packageName\":\"codediffparser.testclasses.inner\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":26,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.inner.MyOtherClass\",\"id\":\"codediffparser.testclasses.inner.MyOtherClass#applyDoSomething\",\"declaringClassesName\":\"MyOtherClass\"},{\"filePath\":\"MyClass.java\",\"name\":\"trick\",\"declariningClassesName\":\"MyClass.MyInnerClass\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":26,\"status\":\"ADDED\",\"parentNodeId\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"id\":\"codediffparser.testclasses.MyClass.MyInnerClass#trick\",\"declaringClassesName\":\"MyClass.MyInnerClass\"},{\"filePath\":\"MyClass.java\",\"name\":\"MyInnerClass\",\"declariningClassesName\":\"MyClass\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"CLASS\",\"modifiers\":[\"public\",\"static\"],\"lineNumber\":22,\"status\":\"ADDED\",\"parentNodeId\":\"codediffparser.testclasses.MyClass\",\"id\":\"codediffparser.testclasses.MyClass.MyInnerClass\",\"declaringClassesName\":\"MyClass\"},{\"filePath\":null,\"name\":\"Class\",\"declariningClassesName\":null,\"packageName\":\"java.lang\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses\",\"id\":\"java.lang.Class\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"Object\",\"declariningClassesName\":null,\"packageName\":\"java.lang\",\"type\":\"REFERENCE\",\"modifiers\":[],\"lineNumber\":null,\"status\":\"UNCHANGED\",\"parentNodeId\":null,\"id\":\"java.lang.Object\",\"declaringClassesName\":null},{\"filePath\":\"MyClass.java\",\"name\":\"MyClass\",\"declariningClassesName\":null,\"packageName\":\"codediffparser.testclasses\",\"type\":\"CLASS\",\"modifiers\":[\"public\"],\"lineNumber\":8,\"status\":\"CHANGED\",\"parentNodeId\":null,\"id\":\"codediffparser.testclasses.MyClass\",\"declaringClassesName\":null},{\"filePath\":null,\"name\":\"bar\",\"declariningClassesName\":\"MyClass\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":18,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.MyClass\",\"id\":\"codediffparser.testclasses.MyClass#bar\",\"declaringClassesName\":\"MyClass\"},{\"filePath\":\"MyClass.java\",\"name\":\"trick\",\"declariningClassesName\":\"MyClass.Ibaz\",\"packageName\":\"codediffparser.testclasses\",\"type\":\"METHOD\",\"modifiers\":[],\"lineNumber\":12,\"status\":\"UNCHANGED\",\"parentNodeId\":\"codediffparser.testclasses.MyClass.Ibaz\",\"id\":\"codediffparser.testclasses.MyClass.Ibaz#trick\",\"declaringClassesName\":\"MyClass.Ibaz\"}]"
            + "}";

    @BeforeAll
    public void beforeAll() {
        this.parser = ParserRunnerFactory.get(PARSER_TYPE.ECLIPSE_PARSER);
    }

    @Test
    public void testParser() {
        final String targetBranch = "src/test/resources/codediffparser/target";
        final String sourceBranch = "src/test/resources/codediffparser/source";
        final String[] filterFiles = new String[0];
        final String dependenciesRoot = "src/test/resources/codediffparser/source";

        parser.run(targetBranch, dependenciesRoot, filterFiles, Mode.TARGET); // aka the old branch
        parser.run(sourceBranch, dependenciesRoot, filterFiles, Mode.SOURCE); // aka the new branch

        assertEquals(parser.getResult(), result);
    }
}
